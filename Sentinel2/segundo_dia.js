/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var roi = ee.FeatureCollection("users/eddrcald/Canton_Guayaquil"),
    vegetation = 
    /* color: #00d464 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.81038660669337, -2.533899851301661],
                  [-79.80969996118556, -2.534993122113522],
                  [-79.80912060403834, -2.535936335405184],
                  [-79.80843395853053, -2.5368366747238906],
                  [-79.80798334741603, -2.537629830271048],
                  [-79.80738253259669, -2.5385730416396446],
                  [-79.80686754846583, -2.5389589006374877],
                  [-79.80609507226954, -2.539430505922811],
                  [-79.80558008813868, -2.5395376889181906],
                  [-79.8048076119424, -2.5392590131117005],
                  [-79.80409950876246, -2.5386802247061544],
                  [-79.80362743997584, -2.538165745905825],
                  [-79.8032412018777, -2.5377370134157737],
                  [-79.80272621774684, -2.5369867312160714],
                  [-79.80242581033717, -2.536515125039162],
                  [-79.80184645318995, -2.535936335405184],
                  [-79.80146021509181, -2.5352932355081745],
                  [-79.80107397699366, -2.5346501352915576],
                  [-79.80075211191188, -2.5341999649498037],
                  [-79.80045170450221, -2.5337283577572034],
                  [-79.80019421243678, -2.5332138769875505],
                  [-79.79995817804347, -2.5324207187339067]]]),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.92871755514166, -2.422511610542134],
                  [-79.92895358953497, -2.423197642221059],
                  [-79.9291037932398, -2.423797919654972],
                  [-79.92929691228888, -2.424505389146047],
                  [-79.92925399694464, -2.4253629274272095],
                  [-79.92895358953497, -2.425705942587471],
                  [-79.9280952826502, -2.4254701196741357],
                  [-79.92766612920782, -2.424912719897367],
                  [-79.92702239904425, -2.4245268276097014],
                  [-79.92620700750372, -2.4239694274443453],
                  [-79.92485517416021, -2.42386223507853],
                  [-79.92369645986578, -2.4237336042283486],
                  [-79.923374594784, -2.4233905885681293],
                  [-79.92356771383307, -2.422533049037365],
                  [-79.92386812124273, -2.421546877905706],
                  [-79.92431873235724, -2.4206678986833516],
                  [-79.92521995458624, -2.4205607060562473],
                  [-79.92646449956915, -2.420539267529821],
                  [-79.92811674032232, -2.421675508963591]]]),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.90604398045642, -2.4193579976544255],
                  [-79.90638730321032, -2.420194100662768],
                  [-79.90604398045642, -2.4210302031554276],
                  [-79.90559336934191, -2.4216197622952746],
                  [-79.90500328335864, -2.421673358567989],
                  [-79.90422007832629, -2.4216519200591575],
                  [-79.90338322911364, -2.4216090430404646],
                  [-79.9026000240813, -2.421458973464386],
                  [-79.90227815899951, -2.4210945187104187],
                  [-79.90178463254077, -2.4205049593420678],
                  [-79.90131256375415, -2.419926118985469],
                  [-79.90089413914782, -2.4192079278291305],
                  [-79.90130183491809, -2.4187577182535933],
                  [-79.90226743016345, -2.4185862098045607],
                  [-79.90328666958911, -2.418607648361876],
                  [-79.90379092488391, -2.4187898760853748],
                  [-79.90394112858874, -2.4191221736357837],
                  [-79.90391967091662, -2.419529506005866],
                  [-79.90390894208056, -2.4198082070306817],
                  [-79.90397331509692, -2.420001153860458],
                  [-79.90449902806384, -2.4200547501971905],
                  [-79.9049067238341, -2.4200440309300144],
                  [-79.90502474103076, -2.4198618033750345],
                  [-79.90529296193225, -2.4196581372552073]]]),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.83569629467789, -2.420905747889946],
                  [-79.82981689251724, -2.419705190192965],
                  [-79.83050353802506, -2.4128019628222552],
                  [-79.83535297192398, -2.412673330923432]]]),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.80226532484325, -2.506361714068275],
                  [-79.80020538831981, -2.5084625526031035],
                  [-79.79767338300975, -2.5085483010430685],
                  [-79.79466930891307, -2.507733690636434],
                  [-79.79441181684764, -2.5055042279828643],
                  [-79.79672924543651, -2.5025458966788934],
                  [-79.7998620655659, -2.5035748822378623]]]),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.85112547656176, -2.4754423694445458],
                  [-79.85181212206957, -2.4763427503701494],
                  [-79.85219836016772, -2.4772860059215995],
                  [-79.85258459826586, -2.47840076161623],
                  [-79.85322832842944, -2.479344015701533],
                  [-79.85357165118334, -2.4805873950593345],
                  [-79.85404371996997, -2.481359147176278],
                  [-79.85447287341235, -2.4826882747660743],
                  [-79.85314249774096, -2.483588650760953],
                  [-79.85086798449633, -2.483588650760953],
                  [-79.84919428607104, -2.483588650760953],
                  [-79.84829306384204, -2.4831170253163455],
                  [-79.84837889453051, -2.4817878981577177],
                  [-79.8488080479729, -2.479558391536249],
                  [-79.84936594744799, -2.4775861325470925],
                  [-79.85009550830004, -2.4761283740147895]]]),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.7408260212064, -2.4311781326562825],
                  [-79.7423924312711, -2.4303420364367576],
                  [-79.74288595772984, -2.4313282011536703]]]),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.71289940173193, -2.407287829101206],
                  [-79.71454091364905, -2.407137757943539],
                  [-79.71398301417395, -2.4081453782565196]]]),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.7117943316178, -2.4085848719894223],
                  [-79.71200890833899, -2.4078666748402324],
                  [-79.71242733294531, -2.4083436864218566]]]),
            {
              "class": 1,
              "system:index": "8"
            })]),
    water = 
    /* color: #1488ff */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.87313503533893, -2.60924248225366],
                  [-79.87279171258503, -2.6090281279789194],
                  [-79.8724805763393, -2.6088673622488954],
                  [-79.87225527078205, -2.608738749650072],
                  [-79.87207288056904, -2.6085243952894692],
                  [-79.87177247315937, -2.608310040892328],
                  [-79.87165445596271, -2.6080956864586615],
                  [-79.87149352342182, -2.6077955901901504],
                  [-79.87180465966755, -2.607752719288797],
                  [-79.87214798242145, -2.6080313801214268],
                  [-79.87263078004413, -2.608395782655571],
                  [-79.8729311874538, -2.608588701601488],
                  [-79.87321013719135, -2.608728031932908],
                  [-79.87342471391254, -2.6088995153965464]]]),
            {
              "class": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.98075459172803, -2.566352821607751],
                  [-79.98074386289197, -2.5666314915387005],
                  [-79.98074386289197, -2.566878007196198],
                  [-79.98076532056409, -2.5671245228061514],
                  [-79.98074386289197, -2.56743534676831],
                  [-79.98075459172803, -2.5677140164631993],
                  [-79.98066876103955, -2.5681320208915737],
                  [-79.98078677823621, -2.568453562666479],
                  [-79.98091552426892, -2.56867864186075],
                  [-79.98126957585889, -2.5688822849071036],
                  [-79.98156998326856, -2.569107364025805],
                  [-79.98156998326856, -2.5693645972557637],
                  [-79.98123738935071, -2.5693324431048508],
                  [-79.98115155866223, -2.569053773763054],
                  [-79.98087260892468, -2.5689573112844144],
                  [-79.98069021871167, -2.568839412689509],
                  [-79.9804970996626, -2.56861433352357],
                  [-79.98030398061353, -2.568399972376274],
                  [-79.9801537769087, -2.5680784305878834],
                  [-79.98020742108899, -2.567478219033015],
                  [-79.98020742108899, -2.566781544553275],
                  [-79.98016450574475, -2.5664278481336065],
                  [-79.98008940389234, -2.5660312793042626],
                  [-79.98095843961316, -2.566052715460336]]]),
            {
              "class": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.89482497711374, -2.3948499282500793],
                  [-79.89482497711374, -2.3946248194584436],
                  [-79.89479279060556, -2.3943782716918354],
                  [-79.89459967155649, -2.394153162822709],
                  [-79.89453529854013, -2.393885176025531],
                  [-79.89442801017954, -2.393424238611821],
                  [-79.8942778064747, -2.393049056881586],
                  [-79.89407395858957, -2.3926738750486827],
                  [-79.8939344837208, -2.3923308515687647],
                  [-79.89406322975351, -2.391912791586621],
                  [-79.89403104324533, -2.391376817064129],
                  [-79.89396667022898, -2.390733647360776],
                  [-79.89381646652414, -2.3902083918794244],
                  [-79.89367425293709, -2.389656224512154],
                  [-79.89360987992073, -2.3891952856775505],
                  [-79.89339530319954, -2.3887557857144244],
                  [-79.89333093018318, -2.3883270051270586],
                  [-79.89318072647835, -2.387866065846363],
                  [-79.89330947251106, -2.3876516754305723],
                  [-79.89350259156014, -2.3879196634451008],
                  [-79.89366352410103, -2.3882734075442236],
                  [-79.89382045035876, -2.388729054993906],
                  [-79.89398138289965, -2.3889327257299904],
                  [-79.89408867126025, -2.389189993985006],
                  [-79.89417450194873, -2.3896723718332584],
                  [-79.89434616332568, -2.3899832374678973],
                  [-79.89441053634204, -2.3903477005360885],
                  [-79.89448563819445, -2.3906692855158904],
                  [-79.8945124602846, -2.391299055883046],
                  [-79.89449100261248, -2.3918028719686375],
                  [-79.89449636703051, -2.392204852755275],
                  [-79.89476484999004, -2.3924446713728287],
                  [-79.89476484999004, -2.3927180181926464],
                  [-79.89481765056925, -2.393071681798151],
                  [-79.89501076961832, -2.3933932661393356],
                  [-79.89508587147074, -2.393779167249173],
                  [-79.89511805797892, -2.393961398291046],
                  [-79.8951877954133, -2.3941221903666987],
                  [-79.89526826168375, -2.394288342158373],
                  [-79.89538627888041, -2.3944866523349906],
                  [-79.89555794025736, -2.394658163815932]]]),
            {
              "class": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.88838353468766, -2.379639465654314],
                  [-79.88837817026963, -2.3799449737651726],
                  [-79.88839962794175, -2.3802022437007553],
                  [-79.88839962794175, -2.380416635277067],
                  [-79.88838353468766, -2.38067926491259],
                  [-79.88824942423692, -2.380882936840377],
                  [-79.88804021193376, -2.3808507781169466],
                  [-79.88793292357316, -2.3806310268200206],
                  [-79.8877773554503, -2.380438074432861],
                  [-79.8878309996306, -2.3801164870609],
                  [-79.88794901682725, -2.3797841800310513],
                  [-79.88798120333543, -2.3795590687717763],
                  [-79.88795438124528, -2.3792053224329455],
                  [-79.88834598376145, -2.379232121401183]]]),
            {
              "class": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.91146578440198, -2.3315942953318554],
                  [-79.91132630953321, -2.3318783740789195],
                  [-79.91118683466443, -2.3320766931702375],
                  [-79.9110366309596, -2.3321142129951777],
                  [-79.9109454358531, -2.3319855735912123],
                  [-79.91084351191053, -2.3319051739577623],
                  [-79.91071476587781, -2.331830134295733],
                  [-79.91060747751722, -2.331733654724372],
                  [-79.91052164682874, -2.331626455192894],
                  [-79.91029634127149, -2.3315460555389236],
                  [-79.91010322222242, -2.3314710158577467],
                  [-79.90996911177167, -2.3313691762840256],
                  [-79.90980281481275, -2.331267336702925],
                  [-79.90958287367353, -2.3311976569853066],
                  [-79.90953459391126, -2.3311172573068326],
                  [-79.90938975462446, -2.3310743774764404],
                  [-79.90916042066937, -2.3310723615575784],
                  [-79.90901021696453, -2.3310670015786776],
                  [-79.90898339487438, -2.330933002099568],
                  [-79.90898339487438, -2.330809722567522],
                  [-79.90883855558758, -2.330766842727767],
                  [-79.90870980955486, -2.3307775626878326],
                  [-79.90857033468609, -2.3307882826478097],
                  [-79.90846841074352, -2.330761482747708],
                  [-79.9084630463255, -2.3305792434134545],
                  [-79.9083933088911, -2.330504203680715],
                  [-79.90822701193218, -2.330493483718575],
                  [-79.90815191007977, -2.3303755641295916],
                  [-79.90838258005505, -2.3302790844585397],
                  [-79.90850596166973, -2.330295164404173],
                  [-79.90864007212048, -2.330364844166472],
                  [-79.90874736048107, -2.3304130839998862],
                  [-79.90883855558758, -2.3305846033942004],
                  [-79.90895657278423, -2.3306650031030927],
                  [-79.9090584967268, -2.330702522965678],
                  [-79.90920870043163, -2.3307078829459527],
                  [-79.90935353971844, -2.3307132429262274],
                  [-79.90935890413647, -2.3307829226678276],
                  [-79.90941254831677, -2.3308954822431405],
                  [-79.90951447225933, -2.3309490820377334],
                  [-79.90987388826733, -2.3309383620789776],
                  [-79.90991680361157, -2.331050921641861],
                  [-79.90993826128368, -2.331163481195724],
                  [-79.91005091406231, -2.331201001045027],
                  [-79.91032449938183, -2.331238520893312],
                  [-79.91052298284893, -2.33125996080618],
                  [-79.91052298284893, -2.3314154001646474],
                  [-79.91074828840618, -2.331490439848788],
                  [-79.91094140745525, -2.331490439848788],
                  [-79.91103796697979, -2.3315386796436286]]]),
            {
              "class": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.90431635118847, -2.327095251606477],
                  [-79.90442363954907, -2.3271488515456706],
                  [-79.90453629232769, -2.3271970914891953],
                  [-79.90453629232769, -2.327341811309885],
                  [-79.9045738432539, -2.3275508510246565],
                  [-79.90448801256542, -2.3278456505697234],
                  [-79.90411786772137, -2.3277920506570173],
                  [-79.90406422354107, -2.3276098109386036],
                  [-79.9039247486723, -2.3275401310400365],
                  [-79.90382818914776, -2.327427571196616],
                  [-79.90369944311504, -2.327229251450638],
                  [-79.9036565277708, -2.3270898916124367],
                  [-79.90349559522991, -2.327047011659466],
                  [-79.90349023081188, -2.3268862118241502],
                  [-79.90365116335278, -2.3268754918344925],
                  [-79.90373162962322, -2.3268754918344925],
                  [-79.90386037565594, -2.3268647718447326],
                  [-79.90393547750836, -2.3268808518293342],
                  [-79.90407495237713, -2.3268433318649713],
                  [-79.90411250330334, -2.3266718120152277],
                  [-79.90417151190167, -2.3265806920865573],
                  [-79.90429489351635, -2.3265806920865573],
                  [-79.90431098677044, -2.3267736519285305]]]),
            {
              "class": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.04571177475964, -2.42141616240555],
                  [-80.0436518382362, -2.426218380742085],
                  [-80.04056193345104, -2.428962497851073],
                  [-80.03026225083386, -2.426904410541646],
                  [-80.02751566880261, -2.4253608430032196],
                  [-80.02116419785534, -2.418672029997878],
                  [-80.01738764756237, -2.4106111089690363],
                  [-80.01721598618542, -2.4058088354395344],
                  [-80.01532771103894, -2.397919349373137],
                  [-80.01429774277722, -2.3920879608590795],
                  [-80.0128053178302, -2.3851599769088305],
                  [-80.01074538130676, -2.380357614139236],
                  [-80.00817046065247, -2.377270372092353],
                  [-80.00817046065247, -2.3724679818515826],
                  [-80.00817046065247, -2.3676655749337394],
                  [-80.00782713789856, -2.3626916359379244],
                  [-80.0102303971759, -2.3584037431924663],
                  [-80.01555189986145, -2.355144935865623],
                  [-80.0212167253009, -2.3582322272075924],
                  [-80.02464995283997, -2.3621770895070817],
                  [-80.02561827911619, -2.370576647071706],
                  [-80.02613326324705, -2.378637803642809],
                  [-80.02750655426267, -2.3853268126986737],
                  [-80.0303169041477, -2.3920354142943556],
                  [-80.03169019516332, -2.397352269730518],
                  [-80.03804166611059, -2.402497594034123],
                  [-80.04525144394262, -2.412616675237983]]]),
            {
              "class": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.84380895811415, -2.3204165771996714],
                  [-79.84380895811415, -2.326076746321202],
                  [-79.84501058775282, -2.3337951221452853],
                  [-79.84689886289931, -2.3404843469213805],
                  [-79.84792883116103, -2.348031126293027],
                  [-79.84895879942275, -2.3544877607386057],
                  [-79.85050375181532, -2.3610053708370122],
                  [-79.85050375181532, -2.3656362857569238],
                  [-79.84758550840712, -2.367865980020254],
                  [-79.8439806194911, -2.3683805243408496],
                  [-79.83968908506728, -2.367865980020254],
                  [-79.83951742369032, -2.363578103255238],
                  [-79.83694250303603, -2.3594617290994644],
                  [-79.83419592100478, -2.353458661618479],
                  [-79.83213598448134, -2.3423100391944778],
                  [-79.8323076458583, -2.3335920990091403],
                  [-79.83162100035048, -2.3289610779226315],
                  [-79.83127767759657, -2.324501561747183],
                  [-79.8326509686122, -2.3196989901096594],
                  [-79.83677084165907, -2.3174692191613624],
                  [-79.8410623760829, -2.3172976981736797]]]),
            {
              "class": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.80128654062067, -2.490210110269959],
                  [-79.79763873636041, -2.4975416836535054],
                  [-79.7923601490191, -2.5041316317414988],
                  [-79.79012855111871, -2.506575468166215],
                  [-79.78553671123927, -2.512191681640814],
                  [-79.78279012920802, -2.5175080590936396],
                  [-79.78296179058498, -2.520680725629798],
                  [-79.77472204449123, -2.5197375012507863],
                  [-79.77661031963771, -2.5145068809365267],
                  [-79.78073019268459, -2.5094477364200185],
                  [-79.7814168381924, -2.5058462995786934],
                  [-79.78519338848537, -2.4988148943488624],
                  [-79.78630918743556, -2.4958994225936624],
                  [-79.79042906048244, -2.4918692009914727],
                  [-79.79403394939845, -2.4878389670521788],
                  [-79.79729551556056, -2.4844684907487165]]]),
            {
              "class": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.78770866469505, -2.494350830584588],
                  [-79.78730096892478, -2.4943079559011863],
                  [-79.78740825728538, -2.4936648354825253],
                  [-79.78805198744895, -2.4931503389212533],
                  [-79.78854551390769, -2.492507217936772],
                  [-79.7892378358249, -2.4917362667084455],
                  [-79.79003176969331, -2.4910717076385667],
                  [-79.79063258451265, -2.490299961201101],
                  [-79.79123339933199, -2.4895710891506106],
                  [-79.79254231733125, -2.4894210272078117]]]),
            {
              "class": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.78941760268624, -2.493846297145766],
                  [-79.78720746245797, -2.4951218188268105],
                  [-79.78679976668771, -2.4948752895227244],
                  [-79.78705725875314, -2.4942214507097846],
                  [-79.78782973494943, -2.493085271015874],
                  [-79.78867731299813, -2.4922321920243418],
                  [-79.78939614501412, -2.491471164961135],
                  [-79.79081235137399, -2.491771288362538]]]),
            {
              "class": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.7625790520524, -2.5905884157229115],
                  [-79.76174220283976, -2.5903365457229532],
                  [-79.76208552559366, -2.589361218867653],
                  [-79.76289555271616, -2.589543422842726]]]),
            {
              "class": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.7657118721818, -2.589152766174679],
                  [-79.76564749916544, -2.590524654509621],
                  [-79.76402744492044, -2.5904389115322197],
                  [-79.7641454621171, -2.5885311287838366],
                  [-79.76578697403421, -2.588616871890368]]]),
            {
              "class": 3,
              "system:index": "12"
            })]),
    notVegetation = 
    /* color: #f30101 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Point([-80.10342990107368, -2.697688832928866]),
            {
              "class": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.97515095323112, -2.2172552312577367],
                  [-79.97515095323112, -2.2172793530653916],
                  [-79.97509999125984, -2.2172833733666337],
                  [-79.97510267346885, -2.217252551056862]]]),
            {
              "class": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.97553853243377, -2.217192246535893],
                  [-79.9757960244992, -2.2171949267368816],
                  [-79.9757048293927, -2.2171949267368816],
                  [-79.97548622935798, -2.2172069876412563],
                  [-79.97545538395431, -2.217188226234409]]]),
            {
              "class": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.974737556574, -2.217170511333916],
                  [-79.97475767314161, -2.217221435152531],
                  [-79.97473353326048, -2.217233496056689]]]),
            {
              "class": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.97464636146749, -2.2171530900271437],
                  [-79.97471744000639, -2.21714504942396],
                  [-79.97470402896131, -2.217181232137987]]]),
            {
              "class": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.9746289271089, -2.2171664910323687],
                  [-79.97451359212126, -2.217119587513546],
                  [-79.97452834427084, -2.2170874250997814],
                  [-79.9746289271089, -2.217139689021791]]]),
            {
              "class": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.95018573953377, -2.383402839814964],
                  [-79.95027693464027, -2.3833224431520503],
                  [-79.95039495183693, -2.3834108794809907]]]),
            {
              "class": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.8741878018684, -2.319547524105437],
                  [-79.87424949267574, -2.319804805170124],
                  [-79.87386593678661, -2.3198932455253027],
                  [-79.87380692818829, -2.3196413244990186]]]),
            {
              "class": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.09980733308633, -2.6984731782106675],
                  [-80.10924870881875, -2.6984731782106675],
                  [-80.11130864534219, -2.7019025939069974],
                  [-80.10959203157266, -2.70430317913145],
                  [-80.10512883577188, -2.7070466992846995],
                  [-80.1006656399711, -2.7084184570324523],
                  [-80.09757573518594, -2.7087613962266666],
                  [-80.09345586213907, -2.7044746493228877],
                  [-80.08985097322305, -2.7010452408905885],
                  [-80.09414250764688, -2.697272880430676]]]),
            {
              "class": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.98951053488105, -2.69313374340721],
                  [-79.98985385763496, -2.6960487601640897],
                  [-79.98873805868476, -2.6966489098061905],
                  [-79.9867639528498, -2.6966489098061905],
                  [-79.98521900045722, -2.6966489098061905],
                  [-79.98521900045722, -2.695362874496364],
                  [-79.9878797518, -2.693991102001384]]]),
            {
              "class": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.90833584923999, -2.7384197089200315],
                  [-79.90988080163257, -2.738076778169948],
                  [-79.91108243127124, -2.7385911742582487],
                  [-79.91039578576343, -2.739277035365706],
                  [-79.90953747887866, -2.7397056983583847]]]),
            {
              "class": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.01504458932834, -2.4687265334545643],
                  [-80.01710452585178, -2.4696697944212778],
                  [-80.01787700204807, -2.470956058296464],
                  [-80.01650371103244, -2.471213310921979],
                  [-80.01573123483615, -2.470012798243129]]]),
            {
              "class": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([-80.01710452585178, -2.4700985491847534]),
            {
              "class": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.13231588264412, -2.867984657031723],
                  [-80.13317418940024, -2.86674167038813],
                  [-80.13420415750765, -2.86609874573224],
                  [-80.13377500412949, -2.8676417642994503],
                  [-80.13308835872459, -2.8684989959373666],
                  [-80.13300252804899, -2.869956288246814],
                  [-80.1330454433868, -2.8711564099299],
                  [-80.1323158826442, -2.870684933704742],
                  [-80.13205839061736, -2.86918478078503]]]),
            {
              "class": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([-80.13251973047575, -2.8685418574590122]),
            {
              "class": 2,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.22016636444893, -2.8038051018417662],
                  [-80.21930805756416, -2.8042337414621525],
                  [-80.21870724274483, -2.8033764620643375],
                  [-80.21922222687569, -2.8022619979081913],
                  [-80.22008053376045, -2.801147532690987],
                  [-80.22162548615303, -2.7999473381939874],
                  [-80.2228271157917, -2.7989185990750443],
                  [-80.22368542267647, -2.79823277249406],
                  [-80.22402874543037, -2.7969468465732668],
                  [-80.22308460785713, -2.794889362167508],
                  [-80.22488705231514, -2.796346747327665],
                  [-80.22754780365791, -2.7966896612198924],
                  [-80.22917858673897, -2.79626101883895],
                  [-80.22960774018135, -2.7972897602900417],
                  [-80.22729031159248, -2.79823277249406],
                  [-80.2257453591999, -2.799690153498937],
                  [-80.22437206818428, -2.800890348259452],
                  [-80.2213679940876, -2.8025191820384134]]]),
            {
              "class": 2,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([-80.2257453591999, -2.7990043273694525]),
            {
              "class": 2,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.85775775612382, -2.2915588551518065],
                  [-79.85805816353349, -2.292695201855269],
                  [-79.85797233284501, -2.2932097736506156],
                  [-79.85642738045243, -2.2938101071779617],
                  [-79.85569781960038, -2.2937886666991716],
                  [-79.85529012383012, -2.2921806298748906],
                  [-79.85657758415726, -2.29130156898051],
                  [-79.857071110616, -2.2908084370229953],
                  [-79.85760755241898, -2.2916660577095436]]]),
            {
              "class": 2,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([-79.85756463707474, -2.2927809638340033]),
            {
              "class": 2,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-80.11157775863828, -2.860415327367916],
                  [-80.1115831230563, -2.8607207181854526],
                  [-80.11157775863828, -2.8609403852144344],
                  [-80.11184597953977, -2.8609403852144344],
                  [-80.11186743721188, -2.861208271778187],
                  [-80.11213029369534, -2.8612297027005935],
                  [-80.11213029369534, -2.861465442820503],
                  [-80.11238778576077, -2.861486873738088],
                  [-80.11238242134274, -2.861765475630281],
                  [-80.11265600666226, -2.861765475630281],
                  [-80.11265600666226, -2.862028004274415],
                  [-80.11293495639981, -2.862022646547589],
                  [-80.11294032081784, -2.862285175132806],
                  [-80.11318708404721, -2.8623066060350606],
                  [-80.11320854171933, -2.8625637768309216],
                  [-80.1134016607684, -2.8625637768309216],
                  [-80.11341775402249, -2.8630888336932623],
                  [-80.11182988628568, -2.8615136623845094],
                  [-80.1108964775485, -2.8606724985880887],
                  [-80.10776133168959, -2.857009223320731],
                  [-80.10821194280409, -2.8567949132903685],
                  [-80.11138767827772, -2.860416747426779]]]),
            {
              "class": 2,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.88277422225764, -2.6222855304947577],
                  [-79.8827313069134, -2.6221488810699776],
                  [-79.88371299541285, -2.6218487881631485],
                  [-79.88382028377345, -2.621972040615735]]]),
            {
              "class": 2,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.88423602617075, -2.6218916585828134],
                  [-79.88411532676508, -2.621990796422669],
                  [-79.88405631816676, -2.6219264907977133],
                  [-79.88418506419947, -2.6218353911567074]]]),
            {
              "class": 2,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.88357530788309, -2.6223409087646923],
                  [-79.88363968089945, -2.622482916968349],
                  [-79.88353239253885, -2.622525787366297],
                  [-79.88347606614954, -2.6223918173678507]]]),
            {
              "class": 2,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.88263117030985, -2.6226195663566543],
                  [-79.88245414451487, -2.6226436809530504],
                  [-79.88232003406412, -2.6220944039200633],
                  [-79.88248633102305, -2.6220649305114705]]]),
            {
              "class": 2,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.76777200154905, -2.5895734885121264],
                  [-79.76720873765592, -2.5894877454703384],
                  [-79.76728920392637, -2.5889196976719258],
                  [-79.7674930518115, -2.5889304155572774],
                  [-79.76784173898344, -2.588978646040204]]]),
            {
              "class": 2,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.76772372178678, -2.5899345286142412],
                  [-79.76775054387693, -2.590159604007177],
                  [-79.76771835736875, -2.59023998806638],
                  [-79.76754133157377, -2.5903203721204933],
                  [-79.76729993276243, -2.5903364489306977],
                  [-79.7672409241641, -2.5901917576314664]]]),
            {
              "class": 2,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-79.7677693591765, -2.59086162461865],
                  [-79.76776399475847, -2.5912045963789323],
                  [-79.76751186711107, -2.5912796214390994],
                  [-79.76736166340623, -2.59124746784243],
                  [-79.76730801922594, -2.591038469444145],
                  [-79.76736166340623, -2.5908509067496457]]]),
            {
              "class": 2,
              "system:index": "26"
            })]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/

var functions = require('users/eddy20c/AI_Proyect:Sentinel2/functions_sentinel2');
var roi = ee.FeatureCollection("users/eddy20c/Area_Manglares_Gye_Diss");
var year = '2019';

// Choose an image asset id
var imageId = "users/eddy20c/mosaicSentinel2-"+year;

// Load as an image
var mosaic = ee.Image(imageId);



// prints the collection structure
print('Mosaic:', mosaic);

// Set the visualization parameters
var visParams = {
    bands: ['B11_median','B8A_median','B4_median'],
    gain: [0.08,0.06,0.2]
};

// Add image to map
Map.addLayer(mosaic, visParams, 'Mosaic');

// Zoom into the image
var geom = ee.Geometry.Point(-80.090935, -2.586809);
Map.centerObject(geom, 9);


// Collect random points inside your polygons
var vegetationPoints = functions.generatePoints(vegetation, 100);

var notVegetationPoints = functions.generatePoints(notVegetation, 100);

var waterPoints = functions.generatePoints(water, 50);

// Merge all samples into a featureCollection
var samples = vegetationPoints.merge(notVegetationPoints).merge(waterPoints);

print(samples);

Map.addLayer(samples.filter(ee.Filter.eq('class', 1)), {color: '#00d464'}, 'vegetation');
Map.addLayer(samples.filter(ee.Filter.eq('class', 2)), {color: '#fff104'}, 'NoVegetation');
Map.addLayer(samples.filter(ee.Filter.eq('class', 3)), {color: '#1488ff'}, 'water');


// Collect the spectral information to get the trained samples
var trainedSamples = mosaic.reduceRegions({
    'collection': samples, 
    'reducer': ee.Reducer.first(), 
    'scale': 30,
  });

trainedSamples = trainedSamples.filter(ee.Filter.notNull(['B2_max']));

print(trainedSamples);


// Set up the Random Forest classifier
var classifier = ee.Classifier.smileRandomForest({
    'numberOfTrees': 50
});

// Training the classifier
classifier = classifier.train({
    'features': trainedSamples, 
    'classProperty': 'class', 
    'inputProperties': [
        'B2_max',
        'B2_median',
        'B2_min',
        'B3_max',
        'B3_median',
        'B3_min',
        'B4_max',
        'B4_median',
        'B4_min',
        'B8A_max',
        'B8A_median',
        'B8A_min',
        'B11_max',
        'B11_median',
        'B11_min',
        'B12_max',
        'B12_median',
        'B12_min',
        'evi_max',
        'evi_median',
        'evi_min',
        'ndvi_max',
        'ndvi_median',
        'ndvi_min',
        'ndwi_max',
        'ndwi_median',
        'ndwi_min',
    ]
    });
    

// Run the Random Forest classifier
var classification = mosaic.classify(classifier);

// Add classification to map
Map.addLayer(classification, {
        'min': 0,
        'max': 3,
        'palette': ['#ffffff','#00d464','#fff104','#1488ff'],
        'format': 'png'
    },
    'classification'
);

// Export the classification to your asset
Export.image.toAsset({
    image: classification, 
    description: 'mangrove-gye-classified-S-'+year, 
    assetId: 'mangrove-gye-classified-S-'+year, 
    pyramidingPolicy: {'.default': 'mode'}, // use mode for classification data
    region: classification.geometry(), 
    scale: 30, 
    maxPixels: 1e13
});